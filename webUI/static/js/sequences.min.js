function Sun_Burst(c,d,a,f,b){var e=this;this.totalSize=0;this.width=c;this.height=d;this.radius=Math.min(this.width,this.height)/2;this.b=a;this.colors=f;this.uid=b;this.sizes={};this.entries={};this.partition=d3.layout.partition().size([2*Math.PI,this.radius*this.radius]).value(function(g){return g.size});this.arc=d3.svg.arc().startAngle(function(g){return g.x}).endAngle(function(g){return g.x+g.dx}).innerRadius(function(g){return Math.sqrt(g.y)}).outerRadius(function(g){return Math.sqrt(g.y+g.dy)});this.vis=d3.select("#chart_"+this.uid).append("svg:svg").attr("width",this.width).attr("height",this.height).append("svg:g").attr("id","container_"+this.uid).attr("transform","translate("+this.width/2+","+this.height/2+")");this.mouseover=function(i){var g,j,h;g=(100*i.value/e.totalSize).toPrecision(3);j=g+"%";if(g<0.1){j="< 0.1%"}d3.select("#percentage_"+e.uid).text(j);d3.select("#explanation_"+e.uid).style("visibility","");h=e.getAncestors(i);e.updateBreadcrumbs(h,j);d3.select("#chart_"+e.uid).selectAll("path").style("opacity",0.3);e.vis.selectAll("path").filter(function(k){return(h.indexOf(k)>=0)}).style("opacity",1)};this.mouseleave=function(g){d3.select("#trail_"+e.uid).style("visibility","hidden");d3.select("#chart_"+e.uid).selectAll("path").on("mouseover",null);d3.select("#chart_"+e.uid).selectAll("path").transition().duration(1000).style("opacity",1).each("end",function(){d3.select(this).on("mouseover",e.mouseover)});d3.select("#explanation_"+e.uid).transition().duration(1000).style("visibility","hidden")}}Sun_Burst.prototype={getAncestors:function(a){var c=[],b=a;while(b.parent){c.unshift(b);b=b.parent}return c},createVisualization:function(c){var b,d;this.initializeBreadcrumbTrail();this.vis.append("svg:circle").attr("r",this.radius).style("opacity",0);b=this.partition.nodes(c).filter(function(g){return(g.dx>0.005)});d=this.vis.data([c]).selectAll("path").data(b).enter().append("svg:path").attr("display",function(g){return g.depth?null:"none"}).attr("d",this.arc).attr("fill-rule","evenodd").style("fill",function(g){return g.color}).style("opacity",1).on("mouseover",this.mouseover);d3.select("#container_"+this.uid).on("mouseleave",this.mouseleave);this.totalSize=d.node().__data__.value;for(var f in d.node().__data__.children){f=d.node().__data__.children[f];var a=(100*f.value/this.totalSize).toPrecision(3);var e=a+"%";if(a<0.1){e="< 0.1%"}this.sizes[f.name]=e}this.drawLegend()},initializeBreadcrumbTrail:function(){var a=d3.select("#sequence_"+this.uid).append("svg:svg").attr("width",this.width).attr("height",50).attr("id","trail_"+this.uid);a.append("svg:text").attr("id","endlabel_"+this.uid).style("fill","#000")},updateBreadcrumbs:function(d,f){var c,e;c=d3.select("#trail_"+this.uid).selectAll("g").data(d,function(g){return g.name+g.depth});e=c.enter().append("svg:g");var b=this;var a=function(j,g){var h=[];h.push("0,0");h.push(b.b.w+",0");h.push(b.b.w+b.b.t+","+(b.b.h/2));h.push(b.b.w+","+b.b.h);h.push("0,"+b.b.h);if(g>0){h.push(b.b.t+","+(b.b.h/2))}return h.join(" ")};e.append("svg:polygon").attr("points",a).style("fill",function(g){return g.color});e.append("svg:text").attr("x",(this.b.w+this.b.t)/2).attr("y",this.b.h/2).attr("dy","0.35em").attr("text-anchor","middle").text(function(g){return g.name});c.attr("transform",function(h,g){return"translate("+g*(b.b.w+b.b.s)+", 0)"});c.exit().remove();d3.select("#trail_"+this.uid).select("#endlabel_"+this.uid).attr("x",(d.length+0.5)*(this.b.w+this.b.s)).attr("y",this.b.h/2).attr("dy","0.35em").attr("text-anchor","middle").text(f);d3.select("#trail_"+this.uid).style("visibility","")},drawLegend:function(){var a,b,d;a={w:190,h:30,s:3,r:3};b=d3.select("#legend_"+this.uid).append("svg:svg").attr("width",a.w).attr("height",d3.keys(this.colors).length*(a.h+a.s));for(var e in this.colors){this.entries[e]=e+" - "+this.sizes[e]}d=b.selectAll("g").data(d3.entries(this.colors)).enter().append("svg:g").attr("transform",function(g,f){return"translate(0,"+f*(a.h+a.s)+")"});d.append("svg:rect").attr("rx",a.r).attr("ry",a.r).attr("width",a.w).attr("height",a.h).style("fill",function(f){return f.value});var c=this;d.append("svg:text").attr("x",a.w/2).attr("y",a.h/2).attr("dy","0.35em").attr("text-anchor","middle").text(function(f){return c.entries[f.key]})},};